CREATE DATABASE ocean_breeze;
USE ocean_breeze;

CREATE TABLE Customer(
	CustID VARCHAR(12) NOT NULL,
	CustTitle VARCHAR(5),
	CustName VARCHAR(30) NOT NULL,
	Reg DATE,
	CustAddress VARCHAR(30),
	City VARCHAR(20),
	Province VARCHAR(20),
	PostalCode VARCHAR(9),
	CONSTRAINT PRIMARY KEY (CustID)
);

CREATE TABLE Reservation(
	ResID VARCHAR(6) NOT NULL,
	ResDate DATE,
	CustID VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (ResID),
	CONSTRAINT FOREIGN KEY(CustID) REFERENCES Customer(CustID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Room(
	RoomId VARCHAR(6) NOT NULL,
	Category VARCHAR(50) NOT NULL,
	Pack VARCHAR(20),
	UnitPrice DECIMAL(6,2) NOT NULL,
	QtyOnHand INT(5) NOT NULL,
	CONSTRAINT PRIMARY KEY (RoomId)
);

CREATE TABLE ResDetail(
	ResID VARCHAR(6) NOT NULL,
	RoomId VARCHAR(6) NOT NULL,
	OrderQTY INT(11) NOT NULL,
	Discount INT(2),
	CONSTRAINT PRIMARY KEY (ResID,RoomId),
	CONSTRAINT FOREIGN KEY (ResID) REFERENCES Reservation(ResID)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY (RoomId) REFERENCES Room(RoomId)
	ON UPDATE CASCADE ON DELETE CASCADE
);